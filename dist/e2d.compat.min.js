"use strict";var _slicedToArray=function(){function a(a,b){var c,d=[],e=!0,f=!1;try{for(var g,h=a[Symbol.iterator]();!(e=(g=h.next()).done)&&(d.push(g.value),!(b&&d.length===b));e=!0);}catch(a){f=!0,c=a}finally{try{!e&&h["return"]&&h["return"]()}finally{if(f)throw c}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.e2d=b()})(void 0,function(){"use strict";var a=Math.tan,b=Math.sin,c=Math.cos,d=Math.PI,e=function(a,b){for(var c,d=[],e=void 0,f=void 0,g=0;g<a.length;g++)c=_slicedToArray(a[g],2),e=c[0],f=c[1],d.push([b[0]*e+b[2]*f+b[4],b[1]*e+b[3]*f+b[5]]);return d},g=0,f=function(h){var i=_slicedToArray(h,6),j=i[0],a=i[1],k=i[2],l=i[3],d=i[4],e=i[5];return g=1/(j*l-k*a),[l*g,-k*g,-a*g,j*g,(a*e-d*l)*g,(d*a-j*e)*g]},h=function(a,b){var c=_slicedToArray(a,2),d=c[0],e=c[1],f=_slicedToArray(b,2),g=_slicedToArray(f[0],2),h=g[0],i=g[1],j=_slicedToArray(f[1],2),k=j[0],l=j[1];return d>h&&e>i&&d<k&&e<l},i=function(a,b){var c=Math.pow,d=_slicedToArray(a,2),e=d[0],f=d[1],g=_slicedToArray(b,3),h=g[0],i=g[1],j=g[2];return c(h-e,2)+c(i-f,2)<c(j,2)},j=function(a,b){for(var c=a[0],d=a[1],e=!1,f=0,g=b.length-1;f<b.length;g=f++){var h=b[f][0],i=b[f][1],j=b[g][0],k=b[g][1];i>d!=k>d&&c<(j-h)*(d-i)/(k-i)+h&&(e=!e)}return e},k=function(){return!1},l=function a(b,c){return _classCallCheck(this,a),this.type=b,this.props=c,Object.seal(this)};Object.seal(l),Object.seal(l.prototype);var m=2*d,n=function(a){return function(){return new l("call",{name:a,args:[],count:0})}},o=n("beginPath"),p=function(a){return function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return new l("call",{name:a,args:2<c.length?c:[0,0,c[0],c[1]],count:4})}},q=p("clearRect"),r=[n("save"),n("beginPath")],s=n("clip"),t=n("restore"),u=n("closePath"),v=function(a){var b=new l("pop",{stack:a});return function(c){for(var d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return[new l("push",{stack:a,value:c})].concat(e,[b])}},w=v("direction"),z=2*d,x=n("restore"),y=n("fill"),A=p("fillRect"),B=v("fillStyle"),C=function(a){return function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return new l("call",{name:a,args:3<=c.length?c:[c[0],0,0],count:4<=c.length?4:3})}},D=C("fillText"),E=v("font"),F=new l("endGlobalAlpha"),G=v("globalCompositeOperation"),H=v("imageSmoothingEnabled"),I=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,b){b=a.exports=function(a){if(a&&"object"===("undefined"==typeof a?"undefined":_typeof(a))){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"==typeof a)return f[a];var e=a+"",g=c[e.toLowerCase()];if(g)return g;var g=d[e.toLowerCase()];return g?g:1===e.length?e.charCodeAt(0):void 0};var c=b.code=b.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},d=b.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(e=97;123>e;e++)c[String.fromCharCode(e)]=e-32;for(var e=48;58>e;e++)c[e-48]=e;for(e=1;13>e;e++)c["f"+e]=e+111;for(e=0;10>e;e++)c["numpad "+e]=e+96;var f=b.names=b.title={};for(e in c)f[c[e]]=e;for(var g in d)c[g]=d[g]}),J=v("lineCap"),K=v("lineDash"),L=v("lineDashOffset"),M=v("lineJoin"),N=v("lineWidth"),O=v("miterLimit"),P=function(a){return function(b,c){return new l("call",{name:a,args:[b,c],count:2})}},Q=P("lineTo"),R=P("moveTo"),S=p("rect"),T=function(a){var b=a.canvas[Symbol.for("mouseData")];b&&(b.dx=b.x-b.previousX,b.dy=b.y-b.previousY,b.previousX=b.x,b.previousY=b.y,b.clicked=0)},U=[1,0,0,1,0,0],V=[].concat,W={transform:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},X={transform:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0,setTransform:!0},Y=new l("restore"),Z=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return[new l("setTransform",[a[0],a[1],a[2],a[3],a[4],a[5]]),c,Y]},$=new l("restore"),_=new l("restore"),aa=v("shadowBlur"),ba=v("shadowColor"),ca=v("shadowOffsetX"),da=v("shadowOffsetY"),ea=new l("restore"),fa=new l("restore"),ga=n("stroke"),ha=p("strokeRect"),ia=v("strokeStyle"),ja=C("strokeText"),ka=v("textAlign"),la=v("textBaseline"),ma=new l("restore"),na=new l("restore");return{activeRegions:function(a){var b=a.canvas[Symbol.for("regions")],c=a.canvas[Symbol.for("mousePoints")],d=a.canvas[Symbol.for("mouseData")],g={};0===c.length&&c.push([d.x,d.y,d.state]);var l,m=!0,n=!1;try{for(var o,p=b[Symbol.iterator]();!(m=(o=p.next()).done);m=!0){var q=o.value,r=e(c,f(q.matrix)),s="hitRect"===q.type?h:"hitRegion"===q.type?j:"hitCircle"===q.type?i:k,t=!0,u=!1,v=void 0;try{for(var w,x,y=r[Symbol.iterator]();!(t=(w=y.next()).done);t=!0)if(x=w.value,s(x,q.points)){q.hover=!0,q.clicked=!!d.clicked,g[q.id]=q;break}}catch(a){u=!0,v=a}finally{try{!t&&y.return&&y.return()}finally{if(u)throw v}}}}catch(a){n=!0,l=a}finally{try{!m&&p.return&&p.return()}finally{if(n)throw l}}return g},arc:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return 3<b.length?new l("call",{name:"arc",args:b,count:6}):1<b.length?new l("call",{name:"arc",args:[b[0],b[1],b[2],0,m,!1],count:6}):new l("call",{name:"arc",args:[0,0,b[0],0,m,!1],count:6})},arcTo:function(a,b,c,d,e){return new l("call",{name:"arcTo",args:[a,b,c,d,e],count:5})},beginPath:o,bezierCurveTo:function(a,b,c,d,e,f){return new l("call",{name:"bezierCurveTo",args:[a,b,c,d,e,f],count:5})},clearRect:q,clip:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return[r,a,s,c,t]},clipPath:function(){return new l("call",{name:"clip",args:[],count:0})},closePath:u,createRegularPolygon:function(){for(var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[0,0],f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3,g=[],h=2*d/f,j=0;j<f;j++)g.push([e[0]+a*c(h*j),e[1]+a*b(h*j)]);return g},direction:w,drawImage:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(9<=b.length)return new l("call",{name:"drawImage",args:b,count:9});var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],m=b[8];return 5<=b.length?new l("call",{name:"drawImage",args:[d,e,f,g,h],count:5}):new l("call",{name:"drawImage",args:3<=b.length?[d,e,f]:[d,0,0],count:3})},ellipse:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7];return new l("call",{name:"ellipse",args:5<b.length?b:4<b.length?[d,e,f,g,h,i,!1]:2<b.length?[d,e,f,g,0,z,!1]:[0,0,d,e,0,z,!1],count:7})},endClip:x,extend:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=a[Symbol.for("extensions")]||(a[Symbol.for("extensions")]={});Object.assign.apply(Object,[e].concat(c))},fill:y,fillArc:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=b[0],f=b[1],g=b[2],h=b[3],i=b[4],j=b[5],k={x:0,y:0,r:e,startAngle:0,endAngle:2*d,counterclockwise:!1};return 3<b.length&&(k.startAngle=h,k.endAngle=i,k.counterclockwise=!!j),2<=b.length&&(k.x=e,k.y=f,k.r=g),new l("fillArc",k)},fillRect:A,fillStyle:B,fillText:D,font:E,globalAlpha:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return[new l("globalAlpha",{value:a}),c,F]},globalCompositeOperation:G,hitCircle:function(a){return new l("hitCircle",{id:a,points:1==(1>=arguments.length?0:arguments.length-1)?[0,0,1>=arguments.length?void 0:arguments[1]]:[1>=arguments.length?void 0:arguments[1],2>=arguments.length?void 0:arguments[2],3>=arguments.length?void 0:arguments[3]]})},hitRect:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=c[0],f=c[1],g=c[2],h=c[3];return 3>=c.length&&(g=e,h=f,e=0,f=0),new l("hitRect",{id:a,points:[[e,f],[e+g,f+h]]})},hitRegion:function(a,b){return new l("hitRegion",{id:a,points:b})},imageSmoothingEnabled:H,initialize:function(a){var b=a.canvas;b[Symbol.for("mouseData")]={x:0,y:0,dx:0,dy:0,previousX:0,previousY:0,state:!1,clicked:0};var c=b[Symbol.for("keyData")]={};for(var d in I.code)I.code.hasOwnProperty(d)&&(c[d]=!1);b[Symbol.for("regions")]=[],b[Symbol.for("mousePoints")]=[],b.tabIndex=1;var e=function(a){var c=a.clientX,d=a.clientY,e=b.getBoundingClientRect(),f=e.left,g=e.top,h=b[Symbol.for("mouseData")],i=[c-f,d-g,h.state];h.x=i[0],h.y=i[1];var j=b[Symbol.for("mousePoints")];return j.push(i),100<j.length&&j.splice(0,j.length-100),a.preventDefault(),!1},f="undefined"==typeof window?b:window;b.addEventListener("mousemove",e),b.addEventListener("mousedown",function(a){var c=a.target;if(c===b){var d=b[Symbol.for("mouseData")];return d.state||(d.clicked+=1),d.state=!0,e(a)}}),b.addEventListener("keydown",function(a){return b[Symbol.for("keyData")][I(a.keyCode)]=!0,a.preventDefault(),!1}),f.addEventListener("mouseup",function(a){var c=b[Symbol.for("mouseData")];c.state=!1,e(a)}),f.addEventListener("keyup",function(a){b[Symbol.for("keyData")][I(a.keyCode)]=!1,a.preventDefault()})},Instruction:l,invertMatrix:f,keyData:function(a){return a.canvas[Symbol.for("keyData")]},lineStyle:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=a.lineCap,f=a.lineDash,g=a.lineDashOffset,h=a.lineJoin,i=a.lineWidth,j=a.miterLimit;return c=e?J(c):c,c=f?K(c):c,c=null==g?c:L(c),c=h?M(c):c,c=null==i?c:N(c),null==j?c:O(c)},lineTo:Q,mouseData:function(a){return a.canvas[Symbol.for("mouseData")]},moveTo:R,moveToLineTo:function(a,b){return 0===b?R(a[0],a[1]):Q(a[0],a[1])},path:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return[o(),b,u()]},pointInRect:h,quadraticCurveTo:function(a,b,c,d){return new l("call",{name:"quadraticCurveTo",args:[a,b,c,d],count:4})},raf:function(a){requestAnimationFrame(function b(){return requestAnimationFrame(b),a()})},rect:S,render:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d,e=b.slice(0,-1),f=!0,g=6,h=new Float64Array(3006);h.set(U);var j=b[b.length-1];T(j);var k=new Float64Array(U),l=j.canvas[Symbol.for("regions")]=[],m=j.canvas[Symbol.for("mousePoints")]=[],n=j.canvas[Symbol.for("extensions")],o={fillStyle:[],strokeStyle:[],globalCompositeOperation:[],imageSmoothingEnabled:[],font:[],textAlign:[],textBaseline:[],direction:[],shadowBlur:[],shadowColor:[],shadowOffsetX:[],shadowOffsetY:[],lineCap:[],lineDash:[],lineDashOffset:[],lineJoin:[],miterLimit:[],lineWidth:[]},p=[];h[0]=U[0],h[1]=U[1],h[2]=U[2],h[3]=U[3],h[4]=U[4],h[5]=U[5];for(var q,r=function(){d=h,h=new Float64Array(h.length+600),h.set(d)},s=e.length,t=0;t<s;t++){if(q=e[t],q&&q.constructor===Array){for(e=V.apply([],e),q=e[t];q&&q.constructor===Array;)e=V.apply([],e),q=e[t];s=e.length}if(q){var i=q,u=i.props,v=i.type;switch(W[v]&&(k[0]=h[g-6],k[1]=h[g-5],k[2]=h[g-4],k[3]=h[g-3],k[4]=h[g-2],k[5]=h[g-1]),X[v]&&(g+=6,g>=h.length&&r()),v){case"transform":h[g-6]=k[0]*u[0]+k[2]*u[1],h[g-5]=k[1]*u[0]+k[3]*u[1],h[g-4]=k[0]*u[2]+k[2]*u[3],h[g-3]=k[1]*u[2]+k[3]*u[3],h[g-2]=k[0]*u[4]+k[2]*u[5]+k[4],h[g-1]=k[1]*u[4]+k[3]*u[5]+k[5],f=!0;continue;case"setTransform":h[g-6]=u[0],h[g-5]=u[1],h[g-4]=u[2],h[g-3]=u[3],h[g-2]=u[4],h[g-1]=u[5],f=!0;continue;case"scale":h[g-6]=k[0]*u.x,h[g-5]=k[1]*u.x,h[g-4]=k[2]*u.y,h[g-3]=k[3]*u.y,h[g-2]=k[4],h[g-1]=k[5],f=!0;continue;case"translate":h[g-6]=k[0],h[g-5]=k[1],h[g-4]=k[2],h[g-3]=k[3],h[g-2]=k[4]+k[0]*u.x+k[2]*u.y,h[g-1]=k[5]+k[1]*u.x+k[3]*u.y,f=!0;continue;case"rotate":h[g-6]=k[0]*u.cos+k[2]*u.sin,h[g-5]=k[1]*u.cos+k[3]*u.sin,h[g-4]=k[0]*-u.sin+k[2]*u.cos,h[g-3]=k[1]*-u.sin+k[3]*u.cos,h[g-2]=k[4],h[g-1]=k[5],f=!0;continue;case"skewX":h[g-6]=k[0],h[g-5]=k[1],h[g-4]=k[0]*u.x+k[2],h[g-3]=k[1]*u.x+k[3],h[g-2]=k[4],h[g-1]=k[5],f=!0;continue;case"skewY":h[g-6]=1*k[0]+k[2]*u.y,h[g-5]=1*k[1]+k[3]*u.y,h[g-4]=k[2],h[g-3]=k[3],h[g-2]=k[4],h[g-1]=k[5],f=!0;continue;case"restore":g-=6,f=!0;continue;}switch(f&&(f=!1,j.setTransform(h[g-6],h[g-5],h[g-4],h[g-3],h[g-2],h[g-1])),v){case"push":if("lineDash"===u.stack){o.lineDash.push(j.getLineDash()),j.setLineDash(u.value);continue}o[u.stack].push(j[u.stack]),j[u.stack]=u.value;continue;case"pop":if("lineDash"===u.stack){j.setLineDash(o.lineDash.pop());continue}j[u.stack]=o[u.stack].pop();continue;case"call":var w=u.name,x=u.args,y=u.count;switch(y){case 0:j[w]();continue;case 1:j[w](x[0]);continue;case 2:j[w](x[0],x[1]);continue;case 3:j[w](x[0],x[1],x[2]);continue;case 4:j[w](x[0],x[1],x[2],x[3]);continue;case 5:j[w](x[0],x[1],x[2],x[3],x[4]);continue;case 6:j[w](x[0],x[1],x[2],x[3],x[4],x[5]);continue;case 7:j[w](x[0],x[1],x[2],x[3],x[4],x[5],x[6]);continue;case 8:j[w](x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7]);continue;case 9:j[w](x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8]);continue;}case"strokeArc":j.beginPath(),j.arc(u.x,u.y,u.r,u.startAngle,u.endAngle,u.counterclockwise),j.closePath(),j.stroke();continue;case"fillArc":j.beginPath(),j.arc(u.x,u.y,u.r,u.startAngle,u.endAngle,u.counterclockwise),j.closePath(),j.fill();continue;case"globalAlpha":p.push(j.globalAlpha),j.globalAlpha*=u.value;continue;case"endGlobalAlpha":j.globalAlpha=p.pop();continue;case"hitRect":case"hitRegion":case"hitCircle":l&&l.push({id:u.id,points:u.points,matrix:[h[g-6],h[g-5],h[g-4],h[g-3],h[g-2],h[g-1]],type:v,hover:!1,touched:!1,clicked:!1});continue;default:n&&n[v]&&n[v](u,j);continue;}}}},resetTransform:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return Z([1,0,0,1,0,0],b)},rotate:function(a){for(var d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return[new l("rotate",{cos:c(a),sin:b(a)}),e,$]},scale:function(a,b){for(var c=arguments.length,d=Array(2<c?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return"number"!=typeof b&&(d=[b].concat(d),b=a),[new l("scale",{x:a,y:b}),d,_]},setTransform:Z,shadowBlur:aa,shadowColor:ba,shadowOffsetX:ca,shadowOffsetY:da,shadowStyle:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=a.shadowBlur,f=a.shadowColor,g=a.shadowOffsetX,h=a.shadowOffsetY;return c=e?aa(c):c,c=f?ba(c):c,c=g?ca(c):c,h?da(c):c},skewX:function(b){for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return[new l("skewX",{x:a(b)}),d,ea]},skewY:function(b){for(var c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return[new l("skewY",{y:a(b)}),d,fa]},stroke:ga,strokeArc:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var e=b[0],f=b[1],g=b[2],h=b[3],i=b[4],j=b[5],k={x:0,y:0,r:e,startAngle:0,endAngle:2*d,counterclockwise:!1};return 3<b.length&&(k.startAngle=h,k.endAngle=i,k.counterclockwise=!!j),1<b.length&&(k.x=e,k.y=f,k.r=g),new l("strokeArc",k)},strokeRect:ha,strokeStyle:ia,strokeText:ja,textAlign:ka,textBaseline:la,textStyle:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=a.font,f=a.textAlign,g=a.textBaseline,h=a.direction;return c=e?E(c):c,c=f?ka(c):c,c=g?la(c):c,h?w(c):c},transform:function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return[new l("transform",[a[0],a[1],a[2],a[3],a[4],a[5]]),c,ma]},transformPoints:e,translate:function(a,b){for(var c=arguments.length,d=Array(2<c?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return[new l("translate",{x:a,y:b}),d,na]}}});